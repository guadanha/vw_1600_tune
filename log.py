import serial
import time
import csv

ser = serial.Serial('/dev/ttyACM0', 115200, timeout=1)
print(ser.name)         # check which port was really used

with open('eggs.csv', 'w', newline='') as csv_file:
    spamwriter = csv.writer(csv_file, delimiter=' ',
                            quotechar='|', quoting=csv.QUOTE_MINIMAL)
    for _ in range(5):
        time.sleep(1)
        ser.write(b'A')     # write a string
        received = ser.read(127)
        print('receive available' + received.hex(':'))
        print('AV v: ' + str(int.from_bytes(received[4:5], 'big')))
        spamwriter.writerow(['Spam', 'Lovely Spam', 'Wonderful Spam'])
        spamwriter.writerow([str(int.from_bytes(received[4:5], 'big')), int.from_bytes(received[4:5], 'big')])

ser.close()             # close port

#/dev/ttyACM0
#receive available00:00:00:00:59:00:28:17:00:7d:6f:64:00:00:00:00:00:00:00:a4:ff:00:00:00:0d:40:00:00:75:01:ff:00:00:00:00:00:00:00:00:00:6e:71:00:00:00:00:00:00:00:00:00:00:00:00:00:00:00:00:00:00:00:00:00:00:00:00:00:00:00:00:00:00:00:00:57:00:00:00:00:00:00:00:00:00:24:00:5a:00:5a:00:00:00:00:00:00:00:00:00:00:00:00:00:ff:00:00:00:00:00:00:00:80:00:00:00:00:00:28:00:0e:00:00:00:00:00:00:00:00
#AV v: 89
#receive available01:00:00:00:36:00:ad:2b:00:39:60:64:00:00:00:00:00:00:00:a4:ff:00:00:00:03:14:8a:0e:75:01:ff:00:40:00:00:00:00:00:42:00:5f:51:00:00:00:00:00:00:00:00:00:00:00:00:00:00:00:00:00:00:00:00:00:00:00:00:00:00:00:00:00:00:00:00:2a:00:00:00:00:00:00:00:00:00:24:00:3a:00:3a:00:00:00:67:00:00:00:00:00:00:00:00:00:ff:00:00:00:00:00:00:00:80:00:00:00:00:01:28:00:03:00:00:00:00:00:00:00:00
#AV v: 54
#receive available02:00:00:00:35:00:b8:3d:00:36:62:64:00:00:00:00:00:00:00:a4:ff:00:00:00:02:18:46:0d:75:01:ff:00:40:00:00:00:00:00:44:00:61:4c:00:00:00:00:00:00:00:00:00:00:00:00:00:00:00:00:00:00:00:00:00:00:00:00:00:00:00:00:00:00:00:00:2e:00:00:00:00:00:00:00:00:00:24:00:36:00:36:00:00:00:77:00:00:00:00:00:00:00:00:00:ff:00:00:00:00:00:00:00:80:00:00:00:00:01:28:00:02:00:00:00:00:00:00:00:00
#AV v: 53
#receive available03:00:00:00:32:00:87:16:00:3b:61:64:00:00:00:00:00:00:00:a4:ff:00:00:00:0f:15:25:0d:75:01:ff:00:40:00:00:00:00:00:42:00:61:4f:00:00:00:00:00:00:00:00:00:00:00:00:00:00:00:00:00:00:00:00:00:00:00:00:00:00:00:00:00:00:00:00:2b:00:00:00:00:00:00:00:00:00:24:00:32:00:32:00:00:00:64:00:00:00:00:00:00:00:00:00:ff:00:00:00:00:00:00:00:80:00:00:00:00:01:28:00:0f:00:00:00:00:00:00:00:00
#AV v: 50
#receive available04:00:00:00:34:00:b6:44:00:37:61:64:00:00:00:00:00:00:00:a4:ff:00:00:00:02:17:49:0d:75:01:ff:00:40:00:00:00:00:00:44:00:61:4d:00:00:00:00:00:00:00:00:00:00:00:00:00:00:00:00:00:00:00:00:00:00:00:00:00:00:00:00:00:00:00:00:2d:00:00:00:00:00:00:00:00:00:24:00:33:00:33:00:00:00:70:00:00:00:00:00:00:00:00:00:ff:00:00:00:00:00:00:00:80:00:00:00:00:01:28:00:02:00:00:00:00:00:00:00:00
#AV v: 52